{% extends "base.html" %}

{% block content %}

{% if nasa %}
<div class="card mb-5 border-0 shadow-sm" style="background-color: #000; color: #fff;">
    <div class="card-header bg-transparent border-secondary text-center">
        <span class="badge bg-primary mb-2">NASA APOD</span><br>
        <h4 class="fw-bold" style="letter-spacing: 2px;">ä»Šæ—¥ã®å®‡å®™å†™çœŸ</h4>
    </div>
    
    {% if nasa.media_type == 'image' %}
    <img src="{{ nasa.url }}" class="card-img-top" alt="{{ nasa.title }}" style="max-height: 500px; object-fit: contain; background-color: #000;">
    
    {% elif nasa.media_type == 'video' %}
    <div class="ratio ratio-16x9">
        <iframe src="{{ nasa.url }}" title="NASA Video" allowfullscreen></iframe>
    </div>
    {% endif %}

    <div class="card-body">
        <h5 class="card-title fw-bold text-warning">{{ nasa.title }}</h5>
        <p class="card-text mt-3" style="line-height: 1.8; font-size: 0.95em;">
            {{ nasa.text }}
        </p>
        <div class="text-end">
            <small class="text-secondary">Source: NASA Astronomy Picture of the Day</small>
        </div>
    </div>
</div>
{% endif %}

<h3 class="mb-4 text-center border-bottom pb-2">ğŸ¦ ä»Šæ—¥ã®ã©ã†ã¶ã¤è±†çŸ¥è­˜ï¼ˆ2é¸ï¼‰</h3>

{% for col in columns %}
<div class="card border-warning mb-5">
    <div class="card-header bg-warning text-dark fw-bold">
        No.{{ loop.index }}ï¼š{{ col.headline }}
    </div>
    
    {% if col.image %}
    <img src="{{ col.image }}" class="card-img-top" alt="{{ col.theme }}" style="max-height: 400px; object-fit: cover;">
    {% endif %}
    
    <div class="card-body">
        <p class="card-text lead" style="line-height: 1.8;">
            {{ col.text | replace('\n', '<br>') | safe }}
        </p>
        
        {% if col.image %}
        <p class="text-muted text-end mt-3 small">Image by Pixabay</p>
        {% else %}
        <p class="text-muted mt-3 small">â€»ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
        {% endif %}
    </div>
</div>
{% else %}
<p>ã‚³ãƒ©ãƒ ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>
{% endfor %}

{% endblock %}
